<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大学杯 配信サポート (実況解説ページ)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAotBKDxazOEtOv_IzoqW9bNPQXaz7a3vA",
            authDomain: "daigakuhai-support-fb.firebaseapp.com",
            projectId: "daigakuhai-support-fb",
            storageBucket: "daigakuhai-support-fb.firebasestorage.app",
            messagingSenderId: "939931798179",
            appId: "1:939931798179:web:8320fba89104e81f47cd16"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
    <style>
        /* CSSの内容はoperator.htmlと共通 */
        :root {
            --primary-color: #202124;
            --surface-container-color: #F1F3F4;
            --surface-color: #FFFFFF;
            --on-surface-color: #202124;
            --on-surface-variant-color: #5F6368;
            --outline-color: #BDC1C6;
            --primary-container-color: #E8EAED;
            --on-primary-container-color: #202124;
            --font-family: 'Noto Sans JP', sans-serif;
            --border-radius-large: 12px;
            --border-radius-medium: 8px;
            --greyed-out-color: #9AA0A6;
            --xp-highlight-color: #E53935;
            --xp-highlight-bg: #FFEBEE;
            --badge-operator-bg: #E3F2FD;
            --badge-operator-text: #0D47A1;
            --badge-commentator-bg: #E8F5E9;
            --badge-commentator-text: #1B5E20;
            --badge-me-bg: #FFF3E0;
            --badge-me-text: #E65100;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--surface-container-color);
            color: var(--on-surface-color);
            margin: 0;
            padding: 16px;
            font-size: 16px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--surface-color);
            padding: 12px 20px;
            border-radius: var(--border-radius-large);
        }

        .header h1 {
            font-size: 22px;
            font-weight: 500;
            margin: 0;
        }

        .connection-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: var(--border-radius-medium);
            background-color: var(--primary-container-color);
            color: var(--on-primary-container-color);
            font-weight: 500;
            font-size: 14px;
        }

        .connection-indicator .status-dot {
            width: 10px;
            height: 10px;
            background-color: #34A853;
            border-radius: 50%;
        }

        .comment-area {
            margin-top: 16px;
            margin-bottom: 16px;
            background-color: var(--surface-color);
            padding: 16px;
            border-radius: var(--border-radius-large);
        }

        .comment-area h2,
        .script-card h2 {
            font-size: 15px;
            font-weight: 700;
            margin: 0 0 10px 0;
        }

        .comment-input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .comment-input-group input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid var(--outline-color);
            border-radius: var(--border-radius-medium);
            font-size: 15px;
        }

        .comment-input-group button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0 16px;
            border-radius: var(--border-radius-medium);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .comment-history .comment-item {
            padding: 6px 8px;
            font-size: 14px;
            display: flex;
            gap: 8px;
            align-items: center;
            border-radius: var(--border-radius-medium);
            border-left: 4px solid transparent;
        }

        .comment-history .comment-item.is-latest {
            border-left: 4px solid var(--badge-me-text);
        }

        .comment-history .badge {
            font-size: 10px;
            padding: 2px 0;
            border-radius: 4px;
            font-weight: 700;
            width: 60px;
            text-align: center;
            flex-shrink: 0;
        }

        .comment-history .badge.is-me {
            background-color: var(--badge-me-bg);
            color: var(--badge-me-text);
        }

        .comment-history .badge.is-operator {
            background-color: var(--badge-operator-bg);
            color: var(--badge-operator-text);
        }

        .comment-history .badge.is-commentator {
            background-color: var(--badge-commentator-bg);
            color: var(--badge-commentator-text);
        }

        .script-card {
            background-color: var(--surface-color);
            padding: 16px;
            border-radius: var(--border-radius-large);
        }

        .script-card .script-paragraph {
            margin: 0 0 8px 0;
            padding: 4px 4px 4px 8px;
            font-size: 15px;
            border-left: 4px solid transparent;
        }

        .script-card .script-paragraph.is-done {
            color: var(--greyed-out-color);
        }

        .script-card .script-paragraph b {
            font-weight: 700;
        }

        .script-card .script-paragraph.is-current {
            font-size: 17px;
            border-left: 4px solid var(--primary-color);
        }

        .script-card .card-footer {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-top: 12px;
        }

        .script-card .card-footer .outline-button {
            font-size: 12px;
            color: var(--on-surface-variant-color);
            background: none;
            border: 1px solid var(--outline-color);
            border-radius: var(--border-radius-medium);
            cursor: pointer;
            padding: 6px 12px;
            font-weight: 500;
            width: fit-content;
        }

        .script-card .card-footer .outline-button:hover {
            background-color: var(--primary-container-color);
        }

        .control-panel {
            margin-top: 16px;
            background-color: var(--surface-color);
            padding: 16px;
            border-radius: var(--border-radius-large);
        }

        .control-panel h2 {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .control-group {
            margin-bottom: 16px;
        }

        .team-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .team-selector select,
        .team-selector .static-team-name {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid var(--outline-color);
            border-radius: var(--border-radius-medium);
            font-size: 15px;
            background-color: var(--surface-container-color);
            color: var(--on-surface-variant-color);
        }

        .team-selector .vs-text {
            font-weight: 700;
            font-size: 14px;
        }

        .sync-button {
            background-color: var(--primary-container-color);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .team-display-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .team-card {
            background-color: var(--surface-color);
            padding: 24px;
            border-radius: var(--border-radius-large);
        }

        .team-card .university-name {
            font-size: 18px;
            font-weight: 700;
        }

        .team-card .team-name {
            font-size: 26px;
            font-weight: 700;
            color: var(--primary-color);
            margin: 2px 0 0 0;
        }

        .team-card .sub-info {
            font-size: 14px;
            color: var(--on-surface-variant-color);
            margin: 4px 0 16px 0;
        }

        .team-card h3 {
            font-size: 16px;
            font-weight: 700;
            border-bottom: 1px solid var(--primary-container-color);
            padding-bottom: 6px;
            margin-top: 24px;
            margin-bottom: 12px;
        }

        .team-card p {
            line-height: 1.7;
            white-space: pre-wrap;
            margin: 12px 0;
        }

        .player-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .player-item {
            padding: 12px 0;
            border-bottom: 1px solid var(--surface-container-color);
        }

        .player-main-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            font-size: 18px;
        }

        .player-main-info .xp-badge {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 700;
            background-color: var(--primary-container-color);
            color: var(--on-primary-container-color);
        }

        .player-main-info .xp-badge.is-highlight {
            background-color: var(--xp-highlight-bg);
            color: var(--xp-highlight-color);
        }

        .player-weapons {
            margin-top: 6px;
            font-size: 15px;
            color: var(--on-surface-variant-color);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.is-active {
            display: flex;
        }

        .modal-content {
            background: var(--surface-color);
            padding: 24px;
            border-radius: var(--border-radius-large);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: sticky;
            top: -24px;
            float: right;
            margin-right: -12px;
            background: var(--surface-container-color);
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .modal-script-list .script-paragraph {
            padding: 12px 8px;
            border-radius: var(--border-radius-medium);
        }

        .modal-script-list .script-paragraph.is-done {
            color: var(--greyed-out-color);
        }

        .modal-content #comment-modal-heading {
            margin: 0 0 16px 0;
            font-size: 16px;
            font-weight: 700;
            color: var(--on-surface-variant-color);
        }

        .modal-content #comment-modal-text {
            font-size: 24px;
            line-height: 1.6;
            margin: 0;
        }

        .highlight-new {
            animation: highlight-fade 2s ease-out;
        }

        @keyframes highlight-fade {
            0% {
                background-color: var(--badge-me-bg);
            }

            100% {
                background-color: transparent;
            }
        }

        .segmented-control {
            display: flex;
            border-radius: var(--border-radius-medium);
            gap: 8px;
            /* ボタン間の隙間を設定 */
        }

        .segmented-control button {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--outline-color);
            /* 枠線を追加 */
            background-color: var(--surface-color);
            /* 背景色を白に */
            color: var(--on-surface-variant-color);
            /* 文字色をグレーに */
            border-radius: var(--border-radius-medium);
            font-size: 14px;
            font-weight: 500;
            /* 太さを通常に */
            cursor: pointer;
            transition: all 0.2s;
        }

        .segmented-control button.active {
            background-color: var(--primary-color);
            /* アクティブな背景色をテーマカラーに */
            color: white;
            /* 文字色を白に */
            border-color: var(--primary-color);
            /* 枠線の色も合わせる */
            font-weight: 700;
            /* 太字にする */
        }

        .team-card-wrapper {
            display: none;
        }

        .team-card-wrapper.active {
            display: block;
        }

        .content-wrapper {
            margin-top: 16px;
        }

        @media (min-width: 769px) {
            .team-display-area {
                grid-template-columns: 1fr 1fr;
            }

            .team-card-wrapper {
                display: block !important;
            }

            .segmented-control {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .control-panel {
                display: flex;
                flex-direction: column;
            }

            .control-group {
                width: 100%;
                text-align: center;
            }

            .sync-button-wrapper {
                margin: 8px 0;
            }

            .content-wrapper {
                display: flex;
                flex-direction: column;
            }

            .segmented-control {
                order: 1;
                margin-bottom: 16px;
            }

            .team-display-area {
                order: 2;
            }
        }
    </style>
</head>

<body>
    <header class="header">
        <h1>大学杯 配信サポート (実況解説ページ)</h1>
        <div class="connection-indicator">
            <div class="status-dot"></div><span>接続状況: <span id="connection-status">接続中...</span></span>
        </div>
    </header>
    <main>
        <section class="comment-area">
            <h2>コメント</h2>
            <div class="comment-input-group"><input type="text" id="comment-input" placeholder="メッセージを入力"><button
                    id="send-comment-button"><span class="material-icons-outlined">send</span>送信</button></div>
            <div class="comment-history" id="comment-history"></div>
        </section>
        <section class="script-card">
            <h2>台本</h2>
            <div id="script-card-content"></div>
            <div class="card-footer"><button class="outline-button" id="open-script-modal-button">全体表示</button></div>
        </section>
        <section class="control-panel">
            <div class="control-group">
                <h2>▼ 現在の対戦チーム</h2>
                <div class="team-selector">
                    <div id="matchup-alpha-display" class="static-team-name">（情報待機中）</div><span
                        class="vs-text">VS</span>
                    <div id="matchup-bravo-display" class="static-team-name">（情報待機中）</div>
                </div>
            </div>
            <div class="sync-button-wrapper"><button id="sync-view-button" class="sync-button"
                    title="表示チームを対戦チームに同期"><span class="material-icons-outlined">arrow_downward</span></button></div>
            <div class="control-group">
                <h2>▼ 表示チーム切り替え</h2>
                <div class="team-selector"><select id="view-alpha-select"></select><span
                        class="vs-text">VS</span><select id="view-bravo-select"></select></div>
            </div>
        </section>
        <div class="content-wrapper">
            <div class="segmented-control"><button id="display-alpha-btn" class="active">アルファ</button><button
                    id="display-bravo-btn">ブラボー</button></div>
            <div class="team-display-area">
                <div id="team-alpha-card-wrapper" class="team-card-wrapper active">
                    <div id="team-alpha-card" class="team-card"></div>
                </div>
                <div id="team-bravo-card-wrapper" class="team-card-wrapper">
                    <div id="team-bravo-card" class="team-card"></div>
                </div>
            </div>
        </div>
    </main>
    <div id="script-modal" class="modal">
        <div class="modal-content"><button class="modal-close" id="script-modal-close"><span
                    class="material-icons-outlined">close</span></button>
            <h2>台本全体</h2>
            <div class="modal-script-list" id="modal-script-list"></div>
        </div>
    </div>
    <div id="comment-modal" class="modal">
        <div class="modal-content"><button class="modal-close" id="comment-modal-close"><span
                    class="material-icons-outlined">close</span></button>
            <h2 id="comment-modal-heading">新着コメント</h2>
            <p id="comment-modal-text"></p>
        </div>
    </div>
    <script>
        const MY_ROLE = '実況解説';
        let teamsData = [], scriptData = [], mySessionId = `com-${Math.random().toString(36).substr(2, 9)}`;
        const sessionDocRef = db.collection('sessions').doc('daigakuhai-support-v1');
        let currentlyDisplayedTeam = 'alpha';

        const getEl = (id) => document.getElementById(id);
        const DOMElements = {
            connectionStatus: getEl('connection-status'),
            commentInput: getEl('comment-input'), sendCommentButton: getEl('send-comment-button'), commentHistory: getEl('comment-history'),
            openScriptModalButton: getEl('open-script-modal-button'), scriptCardContent: getEl('script-card-content'),
            scriptModal: getEl('script-modal'), modalScriptList: getEl('modal-script-list'), scriptModalClose: getEl('script-modal-close'),
            commentModal: getEl('comment-modal'), commentModalHeading: getEl('comment-modal-heading'), commentModalText: getEl('comment-modal-text'), commentModalClose: getEl('comment-modal-close'),
            matchupAlphaDisplay: getEl('matchup-alpha-display'), matchupBravoDisplay: getEl('matchup-bravo-display'),
            viewAlphaSelect: getEl('view-alpha-select'), viewBravoSelect: getEl('view-bravo-select'),
            syncViewButton: getEl('sync-view-button'),
            teamAlphaCard: getEl('team-alpha-card'), teamBravoCard: getEl('team-bravo-card'),
            teamAlphaCardWrapper: getEl('team-alpha-card-wrapper'), teamBravoCardWrapper: getEl('team-bravo-card-wrapper'),
            displayAlphaBtn: getEl('display-alpha-btn'), displayBravoBtn: getEl('display-bravo-btn'),
        };

        sessionDocRef.onSnapshot((doc) => {
            if (!doc.exists) { DOMElements.connectionStatus.textContent = "DBエラー"; return; }
            const state = doc.data();
            DOMElements.connectionStatus.textContent = "正常";

            if (state.matchup && state.matchup.alphaTeamId) {
                const alpha = teamsData.find(t => t.id === state.matchup.alphaTeamId);
                const bravo = teamsData.find(t => t.id === state.matchup.bravoTeamId);
                if (alpha) DOMElements.matchupAlphaDisplay.textContent = alpha.teamName;
                if (bravo) DOMElements.matchupBravoDisplay.textContent = bravo.teamName;
            }
            renderScript(state.scriptIndex || 0);
            renderComments(state.comments || []);

            const lastComment = (state.comments || []).slice(-1)[0];
            if (lastComment && lastComment.senderId !== mySessionId) {
                const lastShownTime = DOMElements.commentModal.dataset.lastShownTime || 0;
                if (lastComment.timestamp && lastComment.timestamp.toMillis() > lastShownTime) {
                    showCommentModal(lastComment.text, lastComment.role);
                    DOMElements.commentModal.dataset.lastShownTime = lastComment.timestamp.toMillis();
                }
            }
        });

        const renderComments = (comments = []) => {
            const latestCommentId = (comments.slice(-1)[0] || {}).id;
            DOMElements.commentHistory.innerHTML = comments.map(c => {
                const isMe = c.senderId === mySessionId;
                let badgeClass = isMe ? 'is-me' : (c.role === '運営' ? 'is-operator' : 'is-commentator');
                let badgeText = isMe ? 'Me' : c.role;
                const isLatestClass = c.id === latestCommentId ? 'is-latest' : '';
                return `<div class="comment-item ${isLatestClass}" id="comment-${c.id}"><span class="badge ${badgeClass}">${badgeText}</span><span class="text">${c.text}</span></div>`;
            }).join('');
            if (latestCommentId) {
                const latestEl = getEl(`comment-${latestCommentId}`);
                if (latestEl && !latestEl.classList.contains('highlighted')) {
                    latestEl.classList.add('highlight-new', 'highlighted');
                    setTimeout(() => { latestEl.classList.remove('highlight-new'); }, 2000);
                }
            }
        };
        const renderScript = (currentIndex = 0) => {
            let cardContentHTML = '';
            if (currentIndex < scriptData.length) { cardContentHTML += `<p class="script-paragraph is-current"><b>${scriptData[currentIndex].speaker}:</b> ${scriptData[currentIndex].line}</p>`; } else { cardContentHTML += '<p class="script-paragraph is-done">台本は終了しました。</p>'; }
            if (currentIndex < scriptData.length - 1) { cardContentHTML += `<p class="script-paragraph"><b>${scriptData[currentIndex + 1].speaker}:</b> ${scriptData[currentIndex + 1].line}</p>`; } else if (currentIndex === scriptData.length - 1) { cardContentHTML += '<p class="script-paragraph is-done">- 次で終了です -</p>'; }
            DOMElements.scriptCardContent.innerHTML = cardContentHTML;
            DOMElements.modalScriptList.innerHTML = scriptData.map((p, i) => `<div class="script-paragraph ${i < currentIndex ? 'is-done' : ''}" data-index="${i}"><b>${p.speaker}:</b> ${p.line}</div>`).join('');
        };
        const createTeamCardHTML = (teamId) => {
            const team = teamsData.find(t => t.id === teamId);
            if (!team) return '<h3>チームを選択してください</h3>';
            const players = [{ name: team.p1_name, xp: team.p1_xp, weapons: team.p1_weapons }, { name: team.p2_name, xp: team.p2_xp, weapons: team.p2_weapons }, { name: team.p3_name, xp: team.p3_xp, weapons: team.p3_weapons }, { name: team.p4_name, xp: team.p4_xp, weapons: team.p4_weapons }];
            const playerListHTML = players.filter(p => p.name).map(p => `<li class="player-item"><div class="player-main-info"><span class="name">${p.name}</span><span class="xp-badge ${p.xp >= 3200 ? 'is-highlight' : ''}">XP: ${p.xp}</span></div><div class="player-weapons">${(p.weapons || '').replace(/\//g, ' / ')}</div></li>`).join('');
            return `<p class="university-name">${team.university}</p><h2 class="team-name">${team.teamName}</h2><p class="sub-info">${team.circleName}</p><h3>プレイヤー情報</h3><ul class="player-list">${playerListHTML}</ul><h3>コメント</h3><p>${team.comment}</p><h3>チーム補足情報</h3><p>${team.teamInfo}</p><h3>プレイヤー補足情報</h3><p>${team.playerInfo}</p><h3>サークル情報</h3><p>${team.circleInfo}</p>`;
        };
        const showCommentModal = (text, role = '不明') => {
            DOMElements.commentModalHeading.textContent = `【${role}】からのコメント`;
            DOMElements.commentModalText.textContent = text;
            DOMElements.commentModal.classList.add('is-active');
        };
        const updateTeamDisplay = () => {
            DOMElements.teamAlphaCard.innerHTML = createTeamCardHTML(DOMElements.viewAlphaSelect.value);
            DOMElements.teamBravoCard.innerHTML = createTeamCardHTML(DOMElements.viewBravoSelect.value);
            if (window.innerWidth <= 768) {
                DOMElements.teamAlphaCardWrapper.style.display = currentlyDisplayedTeam === 'alpha' ? 'block' : 'none';
                DOMElements.teamBravoCardWrapper.style.display = currentlyDisplayedTeam === 'bravo' ? 'block' : 'none';
            } else {
                DOMElements.teamAlphaCardWrapper.style.display = 'block';
                DOMElements.teamBravoCardWrapper.style.display = 'block';
            }
        };

        const initializePage = async () => {
            try {
                const [teamsRes, scriptRes] = await Promise.all([fetch('./teams.json'), fetch('./script.json')]);
                teamsData = await teamsRes.json();
                scriptData = await scriptRes.json();
            } catch (e) { return alert("データファイルの読み込みに失敗しました。"); }
            document.querySelectorAll('select').forEach(select => {
                teamsData.forEach(team => {
                    const option = document.createElement('option');
                    option.value = team.id;
                    option.textContent = team.teamName;
                    select.appendChild(option);
                });
            });
            updateTeamDisplay();
            renderScript();
        };

        const sendComment = () => {
            const text = DOMElements.commentInput.value.trim();
            if (text) {
                db.runTransaction(async (transaction) => {
                    const doc = await transaction.get(sessionDocRef);
                    const currentComments = doc.data().comments || [];
                    const newComment = { id: Math.random().toString(36).substr(2, 9), text: text, senderId: mySessionId, role: MY_ROLE, timestamp: new Date() };
                    const updatedComments = [...currentComments, newComment].slice(-3);
                    transaction.update(sessionDocRef, { comments: updatedComments });
                });
                DOMElements.commentInput.value = '';
            }
        };
        DOMElements.sendCommentButton.onclick = sendComment;

        const setDisplayTeam = (team) => {
            currentlyDisplayedTeam = team;
            DOMElements.displayAlphaBtn.classList.toggle('active', team === 'alpha');
            DOMElements.displayBravoBtn.classList.toggle('active', team === 'bravo');
            updateTeamDisplay();
        };
        DOMElements.displayAlphaBtn.onclick = () => setDisplayTeam('alpha');
        DOMElements.displayBravoBtn.onclick = () => setDisplayTeam('bravo');

        DOMElements.viewAlphaSelect.onchange = updateTeamDisplay;
        DOMElements.viewBravoSelect.onchange = updateTeamDisplay;
        DOMElements.syncViewButton.onclick = () => {
            const alphaTeam = teamsData.find(t => t.teamName === DOMElements.matchupAlphaDisplay.textContent);
            const bravoTeam = teamsData.find(t => t.teamName === DOMElements.matchupBravoDisplay.textContent);
            if (alphaTeam) DOMElements.viewAlphaSelect.value = alphaTeam.id;
            if (bravoTeam) DOMElements.viewBravoSelect.value = bravoTeam.id;
            updateTeamDisplay();
        };

        DOMElements.openScriptModalButton.onclick = () => DOMElements.scriptModal.classList.add('is-active');
        DOMElements.scriptModalClose.onclick = () => DOMElements.scriptModal.classList.remove('is-active');
        DOMElements.scriptModal.onclick = (e) => { if (e.target === DOMElements.scriptModal) DOMElements.scriptModal.classList.remove('is-active'); };
        DOMElements.commentModalClose.onclick = () => DOMElements.commentModal.classList.remove('is-active');
        DOMElements.commentModal.onclick = (e) => { if (e.target === DOMElements.commentModal) DOMElements.commentModal.classList.remove('is-active'); };

        window.onresize = updateTeamDisplay;
        document.addEventListener("DOMContentLoaded", initializePage);
    </script>
</body>

</html>